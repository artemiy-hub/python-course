# –¢–µ–æ—Ä–∏—è: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ Python

## üéØ –¶–µ–ª—å —Ä–∞–∑–¥–µ–ª–∞

–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ - –æ–¥–Ω–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏. Python –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–µ –∏ –≥–∏–±–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤. –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Python.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏](#–æ—Å–Ω–æ–≤—ã-—Ä–∞–±–æ—Ç—ã-—Å-—Ñ–∞–π–ª–∞–º–∏)
2. [–†–µ–∂–∏–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤](#—Ä–µ–∂–∏–º—ã-–æ—Ç–∫—Ä—ã—Ç–∏—è-—Ñ–∞–π–ª–æ–≤)
3. [–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤](#—á—Ç–µ–Ω–∏–µ-—Ñ–∞–π–ª–æ–≤)
4. [–ó–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤](#–∑–∞–ø–∏—Å—å-—Ñ–∞–π–ª–æ–≤)
5. [–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã](#–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ-–º–µ–Ω–µ–¥–∂–µ—Ä—ã)
6. [–ö–æ–¥–∏—Ä–æ–≤–∫–∏ –∏ Unicode](#–∫–æ–¥–∏—Ä–æ–≤–∫–∏-–∏-unicode)
7. [–†–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-–ø—É—Ç—è–º–∏)
8. [–§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏](#—Ñ–∞–π–ª–æ–≤—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏)
9. [–§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤](#—Ñ–æ—Ä–º–∞—Ç—ã-—Ñ–∞–π–ª–æ–≤)
10. [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-—Ç–µ—Ö–Ω–∏–∫–∏)

---

## üìÅ –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–∞–π–ª?

**–§–∞–π–ª** - —ç—Ç–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–æ—Å–∏—Ç–µ–ª–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –í Python —Ñ–∞–π–ª—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –æ–±—ä–µ–∫—Ç—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

```python
# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
file_object = open('filename.txt', 'mode', encoding='utf-8')

# –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
content = file_object.read()    # –ß—Ç–µ–Ω–∏–µ
file_object.write('data')       # –ó–∞–ø–∏—Å—å
file_object.close()             # –ó–∞–∫—Ä—ã—Ç–∏–µ

# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
with open('filename.txt', 'r', encoding='utf-8') as file:
    content = file.read()
# –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ–∞–π–ª–∞

```python
# 1. –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
with open('example.txt', 'w', encoding='utf-8') as file:
    # 2. –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–º
    file.write('Hello, World!')
    file.flush()  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª
    
    # 3. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    file.seek(0)  # –ü–µ—Ä–µ—Ö–æ–¥ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
    current_position = file.tell()  # –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è
    
# 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

### –ê—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

```python
with open('example.txt', 'r', encoding='utf-8') as file:
    print(f"–ò–º—è —Ñ–∞–π–ª–∞: {file.name}")
    print(f"–†–µ–∂–∏–º: {file.mode}")
    print(f"–ö–æ–¥–∏—Ä–æ–≤–∫–∞: {file.encoding}")
    print(f"–ó–∞–∫—Ä—ã—Ç –ª–∏ —Ñ–∞–π–ª: {file.closed}")
    print(f"–î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è: {file.readable()}")
    print(f"–î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏: {file.writable()}")
    print(f"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –ø–æ–∏—Å–∫: {file.seekable()}")
```

---

## üîß –†–µ–∂–∏–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã

```python
# –†–µ–∂–∏–º—ã —á—Ç–µ–Ω–∏—è
'r'   # –ß—Ç–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
'rb'  # –ß—Ç–µ–Ω–∏–µ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
'rt'  # –ß—Ç–µ–Ω–∏–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (—è–≤–Ω–æ)

# –†–µ–∂–∏–º—ã –∑–∞–ø–∏—Å–∏
'w'   # –ó–∞–ø–∏—Å—å (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª)
'wb'  # –ó–∞–ø–∏—Å—å –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
'wt'  # –ó–∞–ø–∏—Å—å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

# –†–µ–∂–∏–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
'a'   # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
'ab'  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
'at'  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

# –†–µ–∂–∏–º—ã —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏
'r+'  # –ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
'w+'  # –ó–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ (—Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª)
'a+'  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —á—Ç–µ–Ω–∏–µ

# –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
'x'   # –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (–æ—à–∏–±–∫–∞ –µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
'xb'  # –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
```

### –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

```python
import os

def demonstrate_file_modes():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤"""
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
    test_file = 'test_modes.txt'
    
    # 1. –†–µ–∂–∏–º 'w' - –∑–∞–ø–∏—Å—å (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—å)
    with open(test_file, 'w', encoding='utf-8') as f:
        f.write('–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞\n')
        f.write('–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞\n')
    
    print("–ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–∂–∏–º–µ 'w':")
    with open(test_file, 'r', encoding='utf-8') as f:
        print(f.read())
    
    # 2. –†–µ–∂–∏–º 'a' - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
    with open(test_file, 'a', encoding='utf-8') as f:
        f.write('–¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞\n')
        f.write('–ß–µ—Ç–≤–µ—Ä—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\n')
    
    print("–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ 'a':")
    with open(test_file, 'r', encoding='utf-8') as f:
        print(f.read())
    
    # 3. –†–µ–∂–∏–º 'r+' - —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
    with open(test_file, 'r+', encoding='utf-8') as f:
        content = f.read()
        print(f"–ü—Ä–æ—á–∏—Ç–∞–Ω–æ: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤")
        
        # –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—á–∞–ª–æ –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å
        f.seek(0)
        f.write('–ü–ï–†–ï–ó–ê–ü–ò–°–ê–ù–û\n')
    
    print("–ü–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–∂–∏–º–µ 'r+':")
    with open(test_file, 'r', encoding='utf-8') as f:
        print(f.read())
    
    # 4. –†–µ–∂–∏–º 'x' - —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
    exclusive_file = 'exclusive_test.txt'
    try:
        with open(exclusive_file, 'x', encoding='utf-8') as f:
            f.write('–§–∞–π–ª —Å–æ–∑–¥–∞–Ω –≤ —Ä–µ–∂–∏–º–µ x')
        print("–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ —Ä–µ–∂–∏–º–µ 'x'")
        
        # –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –µ—â–µ —Ä–∞–∑ - –æ—à–∏–±–∫–∞
        with open(exclusive_file, 'x', encoding='utf-8') as f:
            f.write('–≠—Ç–æ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è')
    except FileExistsError:
        print("–û—à–∏–±–∫–∞: —Ñ–∞–π–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Ä–µ–∂–∏–º 'x')")
    
    # –û—á–∏—Å—Ç–∫–∞
    for filename in [test_file, exclusive_file]:
        if os.path.exists(filename):
            os.remove(filename)

# –í—ã–∑–æ–≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
# demonstrate_file_modes()
```

### –ë–∏–Ω–∞—Ä–Ω—ã–π vs —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

```python
# –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
with open('text_file.txt', 'w', encoding='utf-8') as f:
    f.write('–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üêç')  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –±–∞–π—Ç—ã

with open('text_file.txt', 'r', encoding='utf-8') as f:
    text = f.read()  # –ü–æ–ª—É—á–∞–µ–º —Å—Ç—Ä–æ–∫—É
    print(f"–¢–∏–ø: {type(text)}, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: {text}")

# –ë–∏–Ω–∞—Ä–Ω—ã–π —Ä–µ–∂–∏–º
with open('binary_file.bin', 'wb') as f:
    data = '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üêç'.encode('utf-8')
    f.write(data)  # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –±–∞–π—Ç—ã

with open('binary_file.bin', 'rb') as f:
    binary_data = f.read()  # –ü–æ–ª—É—á–∞–µ–º bytes
    print(f"–¢–∏–ø: {type(binary_data)}")
    text = binary_data.decode('utf-8')
    print(f"–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ: {text}")

# –°–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≤–∏–¥–µ–æ –∏ –¥—Ä—É–≥–∏—Ö –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
def copy_binary_file(source, destination):
    """–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"""
    with open(source, 'rb') as src:
        with open(destination, 'wb') as dst:
            # –ö–æ–ø–∏—Ä—É–µ–º –ø–æ —á–∞—Å—Ç—è–º –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
            while True:
                chunk = src.read(8192)  # 8KB –∑–∞ —Ä–∞–∑
                if not chunk:
                    break
                dst.write(chunk)
```

---

## üìñ –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –ú–µ—Ç–æ–¥—ã —á—Ç–µ–Ω–∏—è

```python
# –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
def demonstrate_reading_methods():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤"""
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
    test_content = """–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞
–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Å —á–∏—Å–ª–∞–º–∏: 123
–¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞ —Å —Å–∏–º–≤–æ–ª–∞–º–∏: @#$%
–ß–µ—Ç–≤–µ—Ä—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
–ü—è—Ç–∞—è –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞"""
    
    with open('read_test.txt', 'w', encoding='utf-8') as f:
        f.write(test_content)
    
    print("=== –ú–µ—Ç–æ–¥—ã —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ ===")
    
    # 1. read() - —á–∏—Ç–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        content = f.read()
        print(f"1. read() - –≤–µ—Å—å —Ñ–∞–π–ª ({len(content)} —Å–∏–º–≤–æ–ª–æ–≤):")
        print(repr(content[:50]) + "...")
    
    # 2. read(size) - —á–∏—Ç–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        chunk1 = f.read(10)
        chunk2 = f.read(10)
        print(f"\n2. read(size) - –ø–æ —á–∞—Å—Ç—è–º:")
        print(f"   –ü–µ—Ä–≤—ã–µ 10: {repr(chunk1)}")
        print(f"   –°–ª–µ–¥—É—é—â–∏–µ 10: {repr(chunk2)}")
    
    # 3. readline() - —á–∏—Ç–∞–µ—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        line1 = f.readline()
        line2 = f.readline()
        print(f"\n3. readline() - –ø–æ —Å—Ç—Ä–æ–∫–∞–º:")
        print(f"   –°—Ç—Ä–æ–∫–∞ 1: {repr(line1)}")
        print(f"   –°—Ç—Ä–æ–∫–∞ 2: {repr(line2)}")
    
    # 4. readlines() - —á–∏—Ç–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Å–ø–∏—Å–æ–∫
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        lines = f.readlines()
        print(f"\n4. readlines() - –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Å–ø–∏—Å–æ–∫:")
        print(f"   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫: {len(lines)}")
        print(f"   –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: {repr(lines[0])}")
    
    # 5. –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª—É
    print(f"\n5. –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª—É:")
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        for i, line in enumerate(f, 1):
            print(f"   –°—Ç—Ä–æ–∫–∞ {i}: {line.strip()}")
    
    # 6. –ß—Ç–µ–Ω–∏–µ —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    print(f"\n6. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:")
    with open('read_test.txt', 'r', encoding='utf-8') as f:
        print(f"   –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è: {f.tell()}")
        
        first_10 = f.read(10)
        print(f"   –ü–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è 10 —Å–∏–º–≤–æ–ª–æ–≤: {f.tell()}")
        
        f.seek(0)  # –í–æ–∑–≤—Ä–∞—Ç –≤ –Ω–∞—á–∞–ª–æ
        print(f"   –ü–æ—Å–ª–µ seek(0): {f.tell()}")
        
        f.seek(5)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ 5-–º—É —Å–∏–º–≤–æ–ª—É
        next_5 = f.read(5)
        print(f"   –° 5-–≥–æ —Å–∏–º–≤–æ–ª–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ: {repr(next_5)}")
    
    # –û—á–∏—Å—Ç–∫–∞
    import os
    os.remove('read_test.txt')

# demonstrate_reading_methods()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

```python
def read_large_file_efficiently(filename, chunk_size=8192):
    """–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ —á–∞—Å—Ç—è–º"""
    
    total_size = 0
    line_count = 0
    
    with open(filename, 'r', encoding='utf-8') as file:
        while True:
            chunk = file.read(chunk_size)
            if not chunk:
                break
            
            total_size += len(chunk)
            line_count += chunk.count('\n')
    
    return total_size, line_count

def read_file_by_lines_generator(filename):
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞"""
    with open(filename, 'r', encoding='utf-8') as file:
        for line_number, line in enumerate(file, 1):
            yield line_number, line.rstrip('\n\r')

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
def process_large_file(filename):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å"""
    for line_num, line in read_file_by_lines_generator(filename):
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏
        if line_num % 10000 == 0:  # –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 10000 —Å—Ç—Ä–æ–∫
            print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ {line_num} —Å—Ç—Ä–æ–∫")
        
        # –ü–æ–∏—Å–∫ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        if 'error' in line.lower():
            print(f"–û—à–∏–±–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ {line_num}: {line}")

# –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
def read_file_reverse(filename, buf_size=8192):
    """–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –∫–æ–Ω—Ü–∞ (–¥–ª—è –ª–æ–≥–æ–≤)"""
    with open(filename, 'rb') as f:
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
        f.seek(0, 2)
        file_size = f.tell()
        
        lines = []
        buffer = b''
        position = file_size
        
        while position > 0:
            # –ß–∏—Ç–∞–µ–º –±–ª–æ–∫
            read_size = min(buf_size, position)
            position -= read_size
            f.seek(position)
            
            chunk = f.read(read_size)
            buffer = chunk + buffer
            
            # –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏
            while b'\n' in buffer:
                line, buffer = buffer.rsplit(b'\n', 1)
                lines.append(line.decode('utf-8'))
        
        # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å
        if buffer:
            lines.append(buffer.decode('utf-8'))
        
        return lines

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
def tail_file(filename, num_lines=10):
    """–ê–Ω–∞–ª–æ–≥ –∫–æ–º–∞–Ω–¥—ã tail - –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫"""
    lines = read_file_reverse(filename)
    return lines[:num_lines]
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ

```python
import os
from pathlib import Path

def safe_read_file(filename, encoding='utf-8', fallback_encoding='latin-1'):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    if not os.path.exists(filename):
        raise FileNotFoundError(f"–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {filename}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
    if not os.access(filename, os.R_OK):
        raise PermissionError(f"–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞: {filename}")
    
    # –ü–æ–ø—ã—Ç–∫–∞ —á—Ç–µ–Ω–∏—è —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
    try:
        with open(filename, 'r', encoding=encoding) as file:
            return file.read()
    except UnicodeDecodeError:
        print(f"–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å {encoding}, –ø—Ä–æ–±—É–µ–º {fallback_encoding}")
        
        # Fallback –∫–æ–¥–∏—Ä–æ–≤–∫–∞
        try:
            with open(filename, 'r', encoding=fallback_encoding) as file:
                return file.read()
        except UnicodeDecodeError:
            # –ß—Ç–µ–Ω–∏–µ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫
            with open(filename, 'r', encoding=encoding, errors='ignore') as file:
                return file.read()

def read_with_progress(filename, callback=None):
    """–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∞"""
    
    # –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    file_size = Path(filename).stat().st_size
    
    with open(filename, 'r', encoding='utf-8') as file:
        content = []
        bytes_read = 0
        
        while True:
            chunk = file.read(8192)
            if not chunk:
                break
            
            content.append(chunk)
            bytes_read += len(chunk.encode('utf-8'))
            
            # –í—ã–∑—ã–≤–∞–µ–º callback —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
            if callback:
                progress = (bytes_read / file_size) * 100
                callback(progress)
        
        return ''.join(content)

# –ü—Ä–∏–º–µ—Ä callback –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
def progress_callback(progress):
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è"""
    bar_length = 30
    filled_length = int(bar_length * progress / 100)
    bar = '‚ñà' * filled_length + '‚ñë' * (bar_length - filled_length)
    print(f'\r–ü—Ä–æ–≥—Ä–µ—Å—Å: |{bar}| {progress:.1f}%', end='', flush=True)
```

---

## ‚úçÔ∏è –ó–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤

### –ú–µ—Ç–æ–¥—ã –∑–∞–ø–∏—Å–∏

```python
def demonstrate_writing_methods():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã"""
    
    print("=== –ú–µ—Ç–æ–¥—ã –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã ===")
    
    # 1. write() - –∑–∞–ø–∏—Å—å —Å—Ç—Ä–æ–∫–∏
    with open('write_test.txt', 'w', encoding='utf-8') as f:
        chars_written = f.write('–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞\n')
        print(f"1. write() –∑–∞–ø–∏—Å–∞–ª {chars_written} —Å–∏–º–≤–æ–ª–æ–≤")
        
        f.write('–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞\n')
        f.write('–¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∞')
    
    # 2. writelines() - –∑–∞–ø–∏—Å—å —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫
    lines = [
        '–ß–µ—Ç–≤–µ—Ä—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\n',
        '–ü—è—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\n',
        '–®–µ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\n'
    ]
    
    with open('write_test.txt', 'a', encoding='utf-8') as f:
        f.writelines(lines)
        print("2. writelines() –¥–æ–±–∞–≤–∏–ª —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫")
    
    # 3. print() –≤ —Ñ–∞–π–ª
    with open('write_test.txt', 'a', encoding='utf-8') as f:
        print('–°–µ–¥—å–º–∞—è —Å—Ç—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ print()', file=f)
        print('–í–æ—Å—å–º–∞—è —Å—Ç—Ä–æ–∫–∞', '—Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏', '–∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏', file=f)
        print('–î–µ–≤—è—Ç–∞—è —Å—Ç—Ä–æ–∫–∞', end=' (–±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∞)\n', file=f)
        print("3. print() –¥–æ–±–∞–≤–∏–ª —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏")
    
    # 4. –ó–∞–ø–∏—Å—å —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    data = {'name': 'Python', 'version': 3.12, 'year': 2023}
    
    with open('write_test.txt', 'a', encoding='utf-8') as f:
        # –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        f.write(f"f-string: {data['name']} –≤–µ—Ä—Å–∏–∏ {data['version']}\n")
        f.write("format(): {} –≤–µ—Ä—Å–∏–∏ {}\n".format(data['name'], data['version']))
        f.write("%-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: %s –≤–µ—Ä—Å–∏–∏ %.1f\n" % (data['name'], data['version']))
    
    print("4. –ó–∞–ø–∏—Å–∞–Ω—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏")
    
    # 5. –ó–∞–ø–∏—Å—å —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    numbers = [1, 2, 3, 4, 5, 3.14, 2.71]
    
    with open('numbers.txt', 'w', encoding='utf-8') as f:
        # –ö–∞–∂–¥–æ–µ —á–∏—Å–ª–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
        for num in numbers:
            f.write(f"{num}\n")
        
        # –ß–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
        f.write(','.join(map(str, numbers)) + '\n')
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞
        for num in numbers:
            if isinstance(num, float):
                f.write(f"{num:.2f}\n")
            else:
                f.write(f"{num:04d}\n")
    
    print("5. –ó–∞–ø–∏—Å–∞–Ω—ã —á–∏—Å–ª–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ")
    
    # –ß—Ç–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    print("\n=== –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Å–∏ ===")
    with open('write_test.txt', 'r', encoding='utf-8') as f:
        content = f.read()
        print("write_test.txt:")
        print(content)
    
    with open('numbers.txt', 'r', encoding='utf-8') as f:
        content = f.read()
        print("numbers.txt:")
        print(content)
    
    # –û—á–∏—Å—Ç–∫–∞
    import os
    for filename in ['write_test.txt', 'numbers.txt']:
        if os.path.exists(filename):
            os.remove(filename)

# demonstrate_writing_methods()
```

### –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å

```python
import os
import tempfile
import shutil

def atomic_write(filename, content, encoding='utf-8'):
    """–ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª (–≤—Å–µ –∏–ª–∏ –Ω–∏—á–µ–≥–æ)"""
    
    # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    dir_name = os.path.dirname(filename) or '.'
    
    with tempfile.NamedTemporaryFile(
        mode='w', 
        encoding=encoding, 
        dir=dir_name, 
        delete=False
    ) as temp_file:
        
        temp_filename = temp_file.name
        
        try:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            temp_file.write(content)
            temp_file.flush()
            os.fsync(temp_file.fileno())  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫
            
        except Exception:
            # –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, —É–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            os.unlink(temp_filename)
            raise
    
    # –ê—Ç–æ–º–∞—Ä–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –º–µ—Å—Ç–æ —Ü–µ–ª–µ–≤–æ–≥–æ
    if os.name == 'nt':  # Windows
        # –ù–∞ Windows –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ü–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º
        if os.path.exists(filename):
            os.unlink(filename)
    
    shutil.move(temp_filename, filename)

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
def save_config_atomically(config_data, filename):
    """–ê—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    import json
    
    config_json = json.dumps(config_data, indent=2, ensure_ascii=False)
    atomic_write(filename, config_json)
    print(f"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ç–æ–º–∞—Ä–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ {filename}")

# –¢–µ—Å—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏
config = {
    'database': {'host': 'localhost', 'port': 5432},
    'server': {'host': '0.0.0.0', 'port': 8000},
    'debug': True
}

# save_config_atomically(config, 'config.json')
```

### –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏

```python
def demonstrate_buffering():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏"""
    
    import time
    
    print("=== –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ ===")
    
    # 1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è
    with open('buffered_test.txt', 'w', encoding='utf-8') as f:
        print("–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –æ–±—ã—á–Ω–æ–π –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–µ–π...")
        
        for i in range(5):
            f.write(f"–°—Ç—Ä–æ–∫–∞ {i}\n")
            print(f"–ó–∞–ø–∏—Å–∞–ª–∏ —Å—Ç—Ä–æ–∫—É {i}")
            time.sleep(0.5)  # –ü–∞—É–∑–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            
            # –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –µ—â–µ –≤ –±—É—Ñ–µ—Ä–µ!
    
    # 2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å
    with open('flushed_test.txt', 'w', encoding='utf-8') as f:
        print("\n–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º —Å–±—Ä–æ—Å–æ–º –±—É—Ñ–µ—Ä–∞...")
        
        for i in range(5):
            f.write(f"–°—Ç—Ä–æ–∫–∞ {i}\n")
            f.flush()  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å –±—É—Ñ–µ—Ä–∞
            print(f"–ó–∞–ø–∏—Å–∞–ª–∏ –∏ —Å–±—Ä–æ—Å–∏–ª–∏ —Å—Ç—Ä–æ–∫—É {i}")
            time.sleep(0.5)
    
    # 3. –ù–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å
    with open('unbuffered_test.txt', 'w', encoding='utf-8', buffering=1) as f:
        print("\n–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–π –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–µ–π...")
        
        for i in range(5):
            f.write(f"–°—Ç—Ä–æ–∫–∞ {i}\n")  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π flush –ø–æ—Å–ª–µ \n
            print(f"–ó–∞–ø–∏—Å–∞–ª–∏ —Å—Ç—Ä–æ–∫—É {i} (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π flush)")
            time.sleep(0.5)
    
    # 4. –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤)
    with open('binary_unbuffered.bin', 'wb', buffering=0) as f:
        print("\n–ë–∏–Ω–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏...")
        
        for i in range(5):
            data = f"–°—Ç—Ä–æ–∫–∞ {i}\n".encode('utf-8')
            f.write(data)  # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å
            print(f"–ó–∞–ø–∏—Å–∞–ª–∏ –±–∞–π—Ç—ã —Å—Ç—Ä–æ–∫–∏ {i}")
            time.sleep(0.5)
    
    # –û—á–∏—Å—Ç–∫–∞
    import os
    for filename in ['buffered_test.txt', 'flushed_test.txt', 
                     'unbuffered_test.txt', 'binary_unbuffered.bin']:
        if os.path.exists(filename):
            os.remove(filename)

# demonstrate_buffering()
```

### –ó–∞–ø–∏—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```python
def write_structured_data():
    """–ó–∞–ø–∏—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö"""
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    data = {
        'users': [
            {'id': 1, 'name': '–ê–ª–∏—Å–∞', 'email': 'alice@example.com', 'age': 25},
            {'id': 2, 'name': '–ë–æ–±', 'email': 'bob@example.com', 'age': 30},
            {'id': 3, 'name': '–ß–∞—Ä–ª–∏', 'email': 'charlie@example.com', 'age': 35}
        ],
        'settings': {
            'theme': 'dark',
            'language': 'ru',
            'notifications': True
        },
        'metadata': {
            'version': '1.0.0',
            'created': '2024-01-01',
            'updated': '2024-01-15'
        }
    }
    
    # 1. CSV —Ñ–æ—Ä–º–∞—Ç
    import csv
    
    with open('users.csv', 'w', newline='', encoding='utf-8') as f:
        writer = csv.DictWriter(f, fieldnames=['id', 'name', 'email', 'age'])
        writer.writeheader()
        writer.writerows(data['users'])
    
    print("1. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ CSV")
    
    # 2. JSON —Ñ–æ—Ä–º–∞—Ç
    import json
    
    with open('data.json', 'w', encoding='utf-8') as f:
        json.dump(data, f, indent=2, ensure_ascii=False)
    
    print("2. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ JSON")
    
    # 3. XML —Ñ–æ—Ä–º–∞—Ç (–ø—Ä–æ—Å—Ç–æ–π)
    def dict_to_xml(data, root_name='root'):
        """–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è –≤ XML"""
        def _dict_to_xml(d, parent_name):
            if isinstance(d, dict):
                result = []
                for key, value in d.items():
                    result.append(f"<{key}>{_dict_to_xml(value, key)}</{key}>")
                return ''.join(result)
            elif isinstance(d, list):
                result = []
                for item in d:
                    result.append(f"<item>{_dict_to_xml(item, 'item')}</item>")
                return ''.join(result)
            else:
                return str(d)
        
        return f"<?xml version='1.0' encoding='UTF-8'?>\n<{root_name}>{_dict_to_xml(data, root_name)}</{root_name}>"
    
    xml_content = dict_to_xml(data, 'application_data')
    
    with open('data.xml', 'w', encoding='utf-8') as f:
        f.write(xml_content)
    
    print("3. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ XML")
    
    # 4. INI —Ñ–æ—Ä–º–∞—Ç
    import configparser
    
    config = configparser.ConfigParser()
    config['settings'] = data['settings']
    config['metadata'] = data['metadata']
    
    with open('config.ini', 'w', encoding='utf-8') as f:
        config.write(f)
    
    print("4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ INI")
    
    # 5. –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    with open('custom_format.txt', 'w', encoding='utf-8') as f:
        f.write("# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏\n")
        for user in data['users']:
            f.write(f"USER:{user['id']}:{user['name']}:{user['email']}:{user['age']}\n")
        
        f.write("\n# –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n")
        for key, value in data['settings'].items():
            f.write(f"SETTING:{key}={value}\n")
        
        f.write("\n# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ\n")
        for key, value in data['metadata'].items():
            f.write(f"META:{key}={value}\n")
    
    print("5. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    import os
    created_files = ['users.csv', 'data.json', 'data.xml', 'config.ini', 'custom_format.txt']
    
    print(f"\n–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:")
    for filename in created_files:
        if os.path.exists(filename):
            size = os.path.getsize(filename)
            print(f"  {filename}: {size} –±–∞–π—Ç")
    
    # –ß–∏—Ç–∞–µ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    print(f"\n–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ custom_format.txt:")
    with open('custom_format.txt', 'r', encoding='utf-8') as f:
        print(f.read())

# write_structured_data()
```

---

## üîí –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

```python
# –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ with
with open('example.txt', 'w', encoding='utf-8') as file:
    file.write('–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞')
# –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–æ–¥—É:
file = open('example.txt', 'w', encoding='utf-8')
try:
    file.write('–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞')
finally:
    file.close()
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```python
# –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
def copy_file_with_context(source, destination):
    """–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""
    
    with open(source, 'r', encoding='utf-8') as src, \
         open(destination, 'w', encoding='utf-8') as dst:
        
        # –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        for line in src:
            dst.write(line)
    
    print(f"–§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ {source} –≤ {destination}")

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
def copy_file_alternative(source, destination):
    """–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏"""
    
    with open(source, 'r', encoding='utf-8') as src:
        with open(destination, 'w', encoding='utf-8') as dst:
            content = src.read()
            dst.write(content)
```

### –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

```python
from contextlib import contextmanager
import time
import os

# –°–ø–æ—Å–æ–± 1: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @contextmanager
@contextmanager
def timed_file_operation(filename, mode='r'):
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏"""
    print(f"–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª {filename} –≤ —Ä–µ–∂–∏–º–µ {mode}")
    start_time = time.time()
    
    try:
        file = open(filename, mode, encoding='utf-8')
        yield file
    finally:
        if not file.closed:
            file.close()
        
        end_time = time.time()
        print(f"–û–ø–µ—Ä–∞—Ü–∏—è —Å —Ñ–∞–π–ª–æ–º –∑–∞–Ω—è–ª–∞ {end_time - start_time:.3f} —Å–µ–∫—É–Ω–¥")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
with timed_file_operation('test.txt', 'w') as f:
    f.write('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ')
    time.sleep(0.1)  # –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã

# –°–ø–æ—Å–æ–± 2: –ö–ª–∞—Å—Å —Å __enter__ –∏ __exit__
class FileManager:
    """–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ñ–∞–π–ª–æ–≤"""
    
    def __init__(self, filename, mode='r', encoding='utf-8', backup=False):
        self.filename = filename
        self.mode = mode
        self.encoding = encoding
        self.backup = backup
        self.file = None
        self.backup_filename = None
    
    def __enter__(self):
        print(f"–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª: {self.filename}")
        
        # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é
        if self.backup and 'w' in self.mode and os.path.exists(self.filename):
            self.backup_filename = f"{self.filename}.backup"
            with open(self.filename, 'r', encoding=self.encoding) as src:
                with open(self.backup_filename, 'w', encoding=self.encoding) as dst:
                    dst.write(src.read())
            print(f"–°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è: {self.backup_filename}")
        
        self.file = open(self.filename, self.mode, encoding=self.encoding)
        return self.file
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        if self.file and not self.file.closed:
            self.file.close()
            print(f"–§–∞–π–ª –∑–∞–∫—Ä—ã—Ç: {self.filename}")
        
        if exc_type is not None:
            print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {exc_type.__name__}: {exc_val}")
            
            # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
            if self.backup_filename and os.path.exists(self.backup_filename):
                print(f"–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏...")
                with open(self.backup_filename, 'r', encoding=self.encoding) as src:
                    with open(self.filename, 'w', encoding=self.encoding) as dst:
                        dst.write(src.read())
        
        # –£–¥–∞–ª—è–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
        if exc_type is None and self.backup_filename and os.path.exists(self.backup_filename):
            os.remove(self.backup_filename)
            print(f"–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —É–¥–∞–ª–µ–Ω–∞")
        
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º False, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∞–≤–ª—è–ª–æ—Å—å
        return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
def test_file_manager():
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
    with open('original.txt', 'w') as f:
        f.write('–ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞')
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    try:
        with FileManager('original.txt', 'w', backup=True) as f:
            f.write('–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞')
            # –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
            # raise ValueError("–¢–µ—Å—Ç–æ–≤–∞—è –æ—à–∏–±–∫–∞")
    except ValueError as e:
        print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –æ—à–∏–±–∫–∞: {e}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    with open('original.txt', 'r') as f:
        print(f"–ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: {f.read()}")

# test_file_manager()
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

```python
import fcntl  # –¢–æ–ª—å–∫–æ –¥–ª—è Unix-—Å–∏—Å—Ç–µ–º
import tempfile
from contextlib import contextmanager

@contextmanager
def locked_file(filename, mode='r'):
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ñ–∞–π–ª–∞ (Unix)"""
    file = open(filename, mode)
    try:
        # –ë–ª–æ–∫–∏—Ä—É–µ–º —Ñ–∞–π–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è Unix)
        if hasattr(fcntl, 'flock'):
            fcntl.flock(file.fileno(), fcntl.LOCK_EX)
        yield file
    finally:
        file.close()

@contextmanager
def temporary_file(suffix='', prefix='tmp', dir=None):
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"""
    temp_file = tempfile.NamedTemporaryFile(
        mode='w+', 
        suffix=suffix, 
        prefix=prefix, 
        dir=dir, 
        delete=False
    )
    
    try:
        yield temp_file
    finally:
        temp_file.close()
        # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        try:
            os.unlink(temp_file.name)
        except OSError:
            pass

@contextmanager
def chdir(path):
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–º–µ–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"""
    old_cwd = os.getcwd()
    try:
        os.chdir(path)
        yield path
    finally:
        os.chdir(old_cwd)

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
def demonstrate_custom_managers():
    # –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
    with temporary_file(suffix='.txt', prefix='test_') as temp:
        temp.write('–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ')
        temp.flush()
        print(f"–í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω: {temp.name}")
        
        # –§–∞–π–ª –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    
    # –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    print(f"–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {os.getcwd()}")
    
    with chdir('/tmp' if os.name != 'nt' else 'C:\\'):
        print(f"–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: {os.getcwd()}")
        # –ú–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    
    print(f"–ü–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: {os.getcwd()}")

# demonstrate_custom_managers()
```

---

## üåê –ö–æ–¥–∏—Ä–æ–≤–∫–∏ –∏ Unicode

### –û—Å–Ω–æ–≤—ã –∫–æ–¥–∏—Ä–æ–≤–æ–∫

```python
# –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ —Å–∏–º–≤–æ–ª—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –±–∞–π—Ç—ã
text = "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üêç"

# –†–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
encodings = ['utf-8', 'utf-16', 'cp1251', 'ascii']

for encoding in encodings:
    try:
        encoded = text.encode(encoding)
        print(f"{encoding:>8}: {len(encoded)} –±–∞–π—Ç - {encoded[:20]}...")
        
        # –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
        decoded = encoded.decode(encoding)
        print(f"         –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ: {decoded == text}")
        
    except UnicodeEncodeError as e:
        print(f"{encoding:>8}: –û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è - {e}")
    except UnicodeDecodeError as e:
        print(f"{encoding:>8}: –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è - {e}")
    
    print()
```

### –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏

```python
def demonstrate_encodings():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏"""
    
    # –¢–µ–∫—Å—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
    texts = {
        'ascii': "Hello, World!",
        'latin': "Caf√©, na√Øve, r√©sum√©",
        'cyrillic': "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!",
        'mixed': "Hello, –º–∏—Ä! üåçüêç",
        'special': "Math: ‚àë, ‚àÜ, ‚àû, ‚âà"
    }
    
    print("=== –†–∞–±–æ—Ç–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ ===")
    
    for name, text in texts.items():
        print(f"\n–¢–µ–∫—Å—Ç '{name}': {text}")
        
        # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
        encodings = ['utf-8', 'utf-16', 'cp1251', 'iso-8859-1', 'ascii']
        
        for encoding in encodings:
            try:
                # –ö–æ–¥–∏—Ä—É–µ–º
                encoded = text.encode(encoding)
                size = len(encoded)
                
                # –î–µ–∫–æ–¥–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ
                decoded = encoded.decode(encoding)
                
                status = "‚úÖ" if decoded == text else "‚ùå"
                print(f"  {encoding:>12}: {size:3d} –±–∞–π—Ç {status}")
                
            except (UnicodeEncodeError, UnicodeDecodeError) as e:
                print(f"  {encoding:>12}: ‚ùå {type(e).__name__}")

# demonstrate_encodings()
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏

```python
def detect_file_encoding(filename, sample_size=10000):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–∞"""
    
    try:
        import chardet
        chardet_available = True
    except ImportError:
        chardet_available = False
        print("–ú–æ–¥—É–ª—å chardet –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ")
    
    # –ß–∏—Ç–∞–µ–º –æ–±—Ä–∞–∑–µ—Ü —Ñ–∞–π–ª–∞ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
    with open(filename, 'rb') as file:
        sample = file.read(sample_size)
    
    if chardet_available:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º chardet –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
        result = chardet.detect(sample)
        encoding = result['encoding']
        confidence = result['confidence']
        
        print(f"–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞: {encoding} (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {confidence:.2%})")
        return encoding
    
    else:
        # –ü—Ä–æ—Å—Ç–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–º –ø–æ–ø—ã—Ç–æ–∫
        common_encodings = ['utf-8', 'cp1251', 'iso-8859-1', 'utf-16']
        
        for encoding in common_encodings:
            try:
                sample.decode(encoding)
                print(f"–í–µ—Ä–æ—è—Ç–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞: {encoding}")
                return encoding
            except UnicodeDecodeError:
                continue
        
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É")
        return 'utf-8'  # Fallback

def safe_read_any_encoding(filename):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –ª—é–±–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π"""
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É
    encoding = detect_file_encoding(filename)
    
    # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
    try:
        with open(filename, 'r', encoding=encoding) as file:
            return file.read()
    except UnicodeDecodeError:
        # –ï—Å–ª–∏ –≤—Å–µ –∂–µ –æ—à–∏–±–∫–∞, —á–∏—Ç–∞–µ–º —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫
        print(f"–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å {encoding}, —á–∏—Ç–∞–µ–º —Å errors='replace'")
        
        with open(filename, 'r', encoding=encoding, errors='replace') as file:
            return file.read()

# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏
def create_test_files():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏"""
    
    test_text = "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç: ASCII, –†—É—Å—Å–∫–∏–π, √©moji üéâ"
    
    encodings = {
        'utf8_test.txt': 'utf-8',
        'cp1251_test.txt': 'cp1251',
        'utf16_test.txt': 'utf-16'
    }
    
    for filename, encoding in encodings.items():
        try:
            with open(filename, 'w', encoding=encoding) as file:
                file.write(test_text)
            print(f"–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª {filename} —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π {encoding}")
        except UnicodeEncodeError:
            print(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π {encoding}")

# create_test_files()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
def demonstrate_encoding_errors():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    # –¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ ASCII
    problematic_text = "–¢–µ–∫—Å—Ç —Å √©moji üêç –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∞–º–∏ ‚àë‚àÜ"
    
    print("=== –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è ===")
    print(f"–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: {problematic_text}")
    
    # –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    error_handlers = {
        'strict': '–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)',
        'ignore': '–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
        'replace': '–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–∏–º–≤–æ–ª –∑–∞–º–µ—â–µ–Ω–∏—è',
        'xmlcharrefreplace': 'XML —á–∏—Å–ª–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏',
        'backslashreplace': 'Escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏'
    }
    
    target_encoding = 'ascii'
    
    for handler, description in error_handlers.items():
        print(f"\n{handler} ({description}):")
        
        try:
            # –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
            encoded = problematic_text.encode(target_encoding, errors=handler)
            print(f"  –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ: {encoded}")
            
            # –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
            if handler != 'ignore':  # ignore –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                decoded = encoded.decode(target_encoding, errors=handler)
                print(f"  –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ: {decoded}")
            
        except UnicodeEncodeError as e:
            print(f"  –û—à–∏–±–∫–∞: {e}")
        except UnicodeDecodeError as e:
            print(f"  –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")

# demonstrate_encoding_errors()
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏

```python
def convert_file_encoding(input_file, output_file, from_encoding, to_encoding):
    """–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–∞ –∏–∑ –æ–¥–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ –¥—Ä—É–≥—É—é"""
    
    try:
        # –ß–∏—Ç–∞–µ–º –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ
        with open(input_file, 'r', encoding=from_encoding) as f:
            content = f.read()
        
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ü–µ–ª–µ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ
        with open(output_file, 'w', encoding=to_encoding) as f:
            f.write(content)
        
        print(f"–§–∞–π–ª —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: {from_encoding} ‚Üí {to_encoding}")
        
    except UnicodeDecodeError as e:
        print(f"–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è ({from_encoding}): {e}")
    except UnicodeEncodeError as e:
        print(f"–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ ({to_encoding}): {e}")

def fix_mojibake(filename, suspected_encoding, target_encoding='utf-8'):
    """–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ '–ºojibake' - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞"""
    
    with open(filename, 'r', encoding=target_encoding, errors='replace') as f:
        broken_text = f.read()
    
    print(f"–°–ª–æ–º–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: {broken_text[:100]}...")
    
    try:
        # –ü—ã—Ç–∞–µ–º—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –∫–æ–¥–∏—Ä—É—è –æ–±—Ä–∞—Ç–Ω–æ –∏ –¥–µ–∫–æ–¥–∏—Ä—É—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
        original_bytes = broken_text.encode('latin1')  # –ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç
        fixed_text = original_bytes.decode(suspected_encoding)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        fixed_filename = filename.replace('.txt', '_fixed.txt')
        with open(fixed_filename, 'w', encoding=target_encoding) as f:
            f.write(fixed_text)
        
        print(f"–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ {fixed_filename}")
        print(f"–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: {fixed_text[:100]}...")
        
    except (UnicodeDecodeError, UnicodeEncodeError) as e:
        print(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å: {e}")

def analyze_file_encoding(filename):
    """–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ –∏ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ"""
    
    print(f"=== –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–∞ {filename} ===")
    
    # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
    with open(filename, 'rb') as f:
        raw_bytes = f.read()
    
    print(f"–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {len(raw_bytes)} –±–∞–π—Ç")
    print(f"–ü–µ—Ä–≤—ã–µ 50 –±–∞–π—Ç: {raw_bytes[:50]}")
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º BOM (Byte Order Mark)
    bom_signatures = {
        b'\xef\xbb\xbf': 'UTF-8 BOM',
        b'\xff\xfe': 'UTF-16 LE BOM',
        b'\xfe\xff': 'UTF-16 BE BOM',
        b'\xff\xfe\x00\x00': 'UTF-32 LE BOM',
        b'\x00\x00\xfe\xff': 'UTF-32 BE BOM'
    }
    
    for bom, description in bom_signatures.items():
        if raw_bytes.startswith(bom):
            print(f"–û–±–Ω–∞—Ä—É–∂–µ–Ω BOM: {description}")
            break
    else:
        print("BOM –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω")
    
    # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
    common_encodings = ['utf-8', 'cp1251', 'iso-8859-1', 'utf-16']
    
    for encoding in common_encodings:
        try:
            decoded = raw_bytes.decode(encoding)
            print(f"\n{encoding}: –£—Å–ø–µ—à–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ")
            print(f"  –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞: {len(decoded)} —Å–∏–º–≤–æ–ª–æ–≤")
            print(f"  –ü–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤: {decoded[:100]}")
            
        except UnicodeDecodeError as e:
            print(f"\n{encoding}: –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è")
            print(f"  {e}")

# –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–π–ª–æ–≤
def encoding_examples():
    """–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏"""
    
    # –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å –ø—Ä–æ–±–ª–µ–º–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
    problematic_text = "–§–∞–π–ª —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π: –ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ CP1251
    with open('cp1251_file.txt', 'w', encoding='cp1251') as f:
        f.write(problematic_text)
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ UTF-8
    convert_file_encoding('cp1251_file.txt', 'utf8_file.txt', 'cp1251', 'utf-8')
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã
    for filename in ['cp1251_file.txt', 'utf8_file.txt']:
        if os.path.exists(filename):
            analyze_file_encoding(filename)

# encoding_examples()
```

–≠—Ç–∞ –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å —Ç–µ–æ—Ä–∏–∏ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏? 